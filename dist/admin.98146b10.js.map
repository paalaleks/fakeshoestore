{"mappings":"AAAe,SAAAA,EAAwBC,EAAaC,EAASC,GAC3CC,SAASC,cAAcF,GAE/BG,UAAY,uBAAuBL,MAAgBC,UCoBtD,SAASK,EAAcC,EAAKC,GACjCC,aAAaC,QAAQH,EAAKI,KAAKC,UAAUJ,ICrB3C,MAAMK,EAAOV,SAASW,eAAe,QAC/BC,EAAWZ,SAASW,eAAe,YACnCE,EAAWb,SAASW,eAAe,YACnCG,EAAmBd,SAASC,cAAc,sBAIhD,SAASc,EAAWC,GAClBA,EAAMC,iBAENH,EAAiBZ,UAAY,GAE7B,MAAMgB,EAAgBN,EAASP,MAAMc,OAC/BC,EAAgBP,EAASR,MAAMc,OAErC,GAA6B,IAAzBD,EAAcG,QAAyC,IAAzBD,EAAcC,OAC9C,OAAOzB,EAAe,UAAW,gBAAiB,uBAKpD0B,eAAuBC,EAAUC,GAC/B,MAEMC,EAAU,CACdC,OAAQ,OACRC,KAHWnB,KAAKC,UAAU,CAAEmB,WAAYL,EAAUC,SAAUA,IAI5DK,QAAS,CACP,eAAgB,qBAIpB,IACE,MAAMC,QAAiBC,MAXb,0DAWwBN,GAC5BO,QAAaF,EAASE,OAExBA,EAAKC,OACPC,SAASC,KAAO,mBDpCtBhC,ECqCgB6B,EAAKI,IDzCN,SAWfjC,EAVc,OCyCC6B,EAAKC,OAGZD,EAAKK,OACPzC,EACE,UACA,4BACA,sBAGJ,MAAOyC,GACPC,QAAQC,IAAIF,IA/BhBG,CAAQtB,EAAeE,GAdzBV,EAAK+B,iBAAiB,SAAU1B,OAkDhC2B,EAAe3B,EClDbf,SAASW,eAAe,UAAUT,UCPnB,yHDQfwC","sources":["components/common/displayMessage.js","js/localstorage/localstorage.js","components/adminForm.js","pages/admin.js","components/footer.js"],"sourcesContent":["export default function displayMessage(messageType, message, targetElement) {\n  const element = document.querySelector(targetElement);\n\n  element.innerHTML = `<div class=\"message ${messageType}\">${message}</div>`;\n}\n","const tokenKey = \"token\";\nconst userKey = \"user\";\n\nexport function saveToken(token) {\n  saveToStorage(token, tokenKey);\n}\nexport function getToken() {\n  return getFromStorage(tokenKey);\n}\n\nexport function saveUser(user) {\n  saveToStorage(userKey, user);\n}\n\nexport function getUsername() {\n  const user = getFromStorage(userKey);\n\n  if (user) {\n    return user.username;\n  }\n  return null;\n}\n\nexport function saveToStorage(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function getFromStorage(key) {\n  const value = localStorage.getItem(key);\n\n  if (!value) {\n    return [];\n  }\n  return JSON.parse(value);\n}\n","import displayMessage from \"./common/displayMessage.js\";\nimport { baseUrl } from \"../js/api/api.js\";\nimport { saveUser, saveToken } from \"../js/localstorage/localstorage.js\";\nconst form = document.getElementById(\"form\");\nconst username = document.getElementById(\"username\");\nconst password = document.getElementById(\"password\");\nconst messageContainer = document.querySelector(\".message-container\");\n\nform.addEventListener(\"submit\", submitForm);\n\nfunction submitForm(event) {\n  event.preventDefault();\n\n  messageContainer.innerHTML = \"\";\n\n  const usernameValue = username.value.trim();\n  const passwordValue = password.value.trim();\n\n  if (usernameValue.length === 0 || passwordValue.length === 0) {\n    return displayMessage(\"warning\", \"Invalid input\", \".message-container\");\n  }\n\n  doLogin(usernameValue, passwordValue);\n\n  async function doLogin(username, password) {\n    const url = baseUrl + \"/auth/local\";\n    const data = JSON.stringify({ identifier: username, password: password });\n    const options = {\n      method: \"POST\",\n      body: data,\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    try {\n      const response = await fetch(url, options);\n      const json = await response.json();\n\n      if (json.user) {\n        location.href = \"/adminPanel.html\";\n        saveToken(json.jwt);\n        saveUser(json.user);\n      }\n\n      if (json.error) {\n        displayMessage(\n          \"warning\",\n          \"Invalid login credentials\",\n          \".message-container\"\n        );\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nexport default submitForm;\n","import \"../styles/global.scss\";\nimport Footer from \"../components/footer.js\";\nimport \"../components/footer.scss\";\nimport \"../components/adminForm.scss\";\nimport \"../components/common/display-message.scss\";\nimport submitForm from \"../components/adminForm.js\";\n\nconst admin = () => {\n  document.getElementById(\"footer\").innerHTML = Footer();\n  submitForm();\n};\n\n// init admin\nadmin();\n","const Footer = () => {\n  const footer = `\n    <footer class=\"footer\">\n    <span> 2022 Â© Witness the fitness, all rights reserved.</span>\n    </footer>\n    `;\n  return footer;\n};\n\nexport default Footer;\n"],"names":["$a3ceea796155ca34$export$2e2bcd8739ae039","messageType","message","targetElement","document","querySelector","innerHTML","$3af418b4b19e1af7$export$20e5eb467ec2dc0a","key","value","localStorage","setItem","JSON","stringify","$e0d8d7dd6c45e606$var$form","getElementById","$e0d8d7dd6c45e606$var$username","$e0d8d7dd6c45e606$var$password","$e0d8d7dd6c45e606$var$messageContainer","$e0d8d7dd6c45e606$var$submitForm","event","preventDefault","usernameValue","trim","passwordValue","length","async","username","password","options","method","body","identifier","headers","response","fetch","json","user","location","href","jwt","error","console","log","doLogin","addEventListener","$e0d8d7dd6c45e606$export$2e2bcd8739ae039"],"version":3,"file":"admin.98146b10.js.map"}